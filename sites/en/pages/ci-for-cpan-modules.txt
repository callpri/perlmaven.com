=title CI for CPAN modules
=timestamp 2022-10-17T10:30:01
=indexes GitHub
=status show
=author szabgab
=archive 1
=comments_disqus_enable 0
=show_related 1

=abstract start

After I read the editorial of <a href="https://perlweekly.com/archive/586.html">Perl Weekly issue 586</a> I though I should try to send
as many PR as I can to enable GitHub Actions on CPAN projects.

There is a whole series about <a href="/ci">why use CI and how to set up CI</a> and several <a href="/os">examples with videos</a>.

I started at <a href="https://cpan-digger.perlmaven.com/">CPAN Digger</a>

=abstract end

2022.10.11 <a href="https://metacpan.org/dist/Pinto-Remote-SelfContained">Pinto-Remote-SelfContained</a>
I add a GitHub Actions configuration file, but bumped into an error:
<a href="https://github.com/reyjrar/Pinto-Remote-SelfContained/issues/2">Error: [PodWeaver] [Support] No bugtracker in metadata!</a>
Locally I get a different error: <a href="https://github.com/reyjrar/Pinto-Remote-SelfContained/issues/3">Can't locate Test/EOL.pm</a>.

2022.10.17 <a href="https://metacpan.org/dist/Test-Spy">Test-Spy</a> - thar was easy. I configure <a href="https://github.com/bbrtj/perl-test-spy/pull/1">GitHub Actions</a>.
Everything worked, except that it seems Perl 5.36 is not available on Windows to be used pn GitHub Actions. The Pull-request was accepted within a few minutes. <b>DONE</b>

2022.10.17 <a href="https://metacpan.org/dist/Weather-GHCN-Fetch">Weather-GHCN-Fetch</a> I have added <a href="https://github.com/jgpuckering/Weather-GHCN-Fetch/pull/2">GitHub Action configuration files</a>.
The tests are failing with <a href="https://github.com/jgpuckering/Weather-GHCN-Fetch/issues/1">Bailout called. Further testing stopped: *E* cached folder is missing</a>.
I also sent a <a href="https://github.com/jgpuckering/Weather-GHCN-Fetch/pull/3">PR with .gitignore</a>

2022.10.17 <a href="https://metacpan.org/dist/EAV-XS">EAV-XS</a> has a number of non-perl dependencies listed in the README that I did not know how to install
so <a href="https://github.com/gh0stwizard/p5-EAV-XS/issues/1">I asked for help</a>. <b>DONE</b>

2022.10.17 <a href="https://metacpan.org/dist/Gzip-Libdeflate">Gzip-Libdeflate</a> was complaining that it <a href="https://github.com/benkasminbullock/gzip-libdeflate/issues/3">Could not open 'lib/Gzip/Libdeflate.pod'</a>.
Ben Bullock, the author, quickly replied and made some adjustments so I could make some progress (even though I did not exaactly liked the solution).
Anyway I bumped into <a href="https://github.com/benkasminbullock/gzip-libdeflate/issues/4">another issue</a>.
After I was told how to proceed (and basically how to set up a development environment) I could finish the
<a href="https://github.com/benkasminbullock/gzip-libdeflate/pull/5">working CI workflow</a>.

2022.10.17 <a href="https://metacpan.org/dist/Memoize">Memoize</a>  I found some generated files that <a href="https://github.com/ap/Memoize/pull/2">were not in .gitignore</a>. (Apparently Aristotle does not want to ignore anything as he
removed the .gitignore file a few monthes ago.)
adding GitHub Actions was <a href="https://github.com/ap/Memoize/pull/3">quite easy</a>. <b>DONE</b>

2022.10.18 <a href="https://metacpan.org/dist/Dancer2-Plugin-RPC-RESTISH">Dancer2-Plugin-RPC-RESTISH</a>
It was quite simple to <a href="https://github.com/abeltje/Dancer2-Plugin-RPC-RESTISH/pull/1">add GitHub Actions</a> to this module,
but it seems that the installation of the dependencies was a bit flaky when I first set up GA.

2022.10.18 <a href="https://metacpan.org/dist/Hustle-Table">Hustle-Table</a> It was <a href="https://github.com/drclaw1394/perl5-hustle-table/pull/1">easy to enable CI</a>.

2022.10.18 <a href="https://metacpan.org/dist/Term-TablePrint">Term-TablePrint</a> It was <a href="https://github.com/kuerbis/Term-TablePrint/pull/2">easy to enable CI</a>.

2022.10.18 <a href="https://metacpan.org/dist/PAUSE-Packages">PAUSE-Packages</a> It was <a href="https://github.com/neilb/PAUSE-Packages/pull/11">easy to enable CI</a> though the tests
fail on MS Windows so I had to disable that platform.

2022.10.18 <a href="https://metacpan.org/dist/Bio-ToolBox">Bio-ToolBox</a> the tests are currently failing. It was
<a href="https://rt.cpan.org/Public/Bug/Display.html?id=144444">reported</a> a few weeks ago. The first iteration of the
CI showed the same error.

2022.10.21 <a href="https://metacpan.org/dist/Sniffer-HTTP">Sniffer-HTTP</a>. When I tried to install it I got a problem that Net-Pcap,
one of the dependencies would not install out of the box. So first I looked at that module to see if I can figure out how to install that.
Then <a href="https://github.com/Corion/sniffer-http/pull/1">this Pull-Request</a> was much easier. <b>DONE</b>`

2022.10.21 <a href="https://metacpan.org/dist/Net-Pcap">Net-Pcap</a> wasn't difficult after all, but I had to install some external dependencies using
<code>
    - name: Install external dependencies on Ubuntu
      if:  ${{ startsWith( matrix.runner, 'ubuntu-')}}
      run: |
        sudo apt-get install libpcap-dev
</code>

I only figured out how to do it on Ubuntu. Either the author of the module will add the installation on OSX and Windows as well, or if they tell me how to do
it I might have the time to figure out how to do it on the CI server.

I had to install a bunch of extra Perl modules for the tests, enable an environment variable and even create a directory. Though as I can see
a spell checker is still missing.

I also trid to run the CI on all versions of Perl betwee 5.10 and 5.36, but it seems some of the dependencies need perl 5.26 so I limited the
matrix for that. Anyway here is the <a href="https://github.com/maddingue/Net-Pcap/pull/14">Pull-Request</a>

2022.10.21 <a href="https://metacpan.org/dist/WebFetch">WebFetch</a>. I configured the CI, but encountered and reported a problem:
<a href="https://github.com/ikluft/WebFetch/issues/2">Error: Duplication of element resources.repository.web</a>.

